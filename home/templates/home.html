{% extends 'base.html' %}

{% block title %}Home Page{% endblock %}

{% block content %}

<div class="container mt-3">
   <h4>Welcome {{ user.username|capfirst }}</h4>
   <p class="lead text-muted"> Thankyou for becoming a member of our community, find your way round by the tabs below to view bugs and features. Click on the profile logo at the top to view your own bugs or features and if you wish to create any.</p>
    <ul class="nav nav-tabs mt-3" id="myTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="Bug-tab" data-toggle="tab" href="#Bug" role="tab" aria-controls="Bug" aria-selected="true">Bugs</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="Feature-tab" data-toggle="tab" href="#Feature" role="tab" aria-controls="Feature" aria-selected="false">Features</a>
        </li>
    </ul>

     {% comment %}  <---------- BUGS ----------> {% endcomment %}

    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="Bug" role="tabpanel"    aria-labelledby="Bug-tab">
            <p class="lead text-muted tab-display">
                All the bugs below have been posted by our community that they are currently having issues with and would like help from others in finding a solution. You can choose to upvote this issue or post a comment that will help resolve the bug.
            </p>
            <hr>
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Todo</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Doing</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="pills-contact-tab" data-toggle="pill" href="#pills-contact" role="tab" aria-controls="pills-contact" aria-selected="false">Done</a>
                </li>
            </ul>

            <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                    <div class="row">
                        {% for bug in bugs %}
                            {% if bug.status == "Todo" %}
                                <div class="col-md-4">
                                    <div style="border-left: 5px solid red" class="card flex-md-row mb-4 shadow-sm h-md-250 card-display">
                                        <div class="card-body d-flex flex-column align-items-start">
                                            <h5 class="post-title">
                                                {{ bug.title }}
                                            </h5>
                                            <a href="{% url 'delete_bug' bug.id %}">
                                                <button type="button" class="close right-corner" aria-label="Close">
                                                    <span aria-hidden="true">
                                                        &times;
                                                    </span>
                                                </button>
                                            </a>
                                            <p class="card-text mb-auto post-text">
                                                {{ bug.description|truncatechars:65 }}
                                            </p>
                                            <div class="mb-1 text-muted post-date">
                                                {{ bug.created_date| date:"D j Y " }}
                                            </div>
                                            <a href="{% url 'preview_bug' bug.id %}">
                                                <button type="button" class="badge badge-info">
                                                    View Bug
                                                </button>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
                <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                    <div class="row">
                        {% for bug in bugs %}
                            {% if bug.status == "Doing" %}
                                <div class="col-md-4">
                                    <div style="border-left: 5px solid orange" class="card flex-md-row mb-4 shadow-sm h-md-250 card-display">
                                        <div class="card-body d-flex flex-column align-items-start">
                                            <h5 class="post-title">
                                                {{ bug.title }}
                                            </h5>
                                            <a href="{% url 'delete_bug' bug.id %}">
                                                <button type="button" class="close right-corner" aria-label="Close">
                                                    <span aria-hidden="true">
                                                        &times;
                                                    </span>
                                                </button>
                                            </a>
                                            <p class="card-text mb-auto post-text">
                                                {{ bug.description|truncatechars:65 }}
                                            </p>
                                            <div class="mb-1 text-muted post-date">
                                                {{ bug.created_date| date:"D j Y " }}
                                            </div>
                                            <a href="{% url 'preview_bug' bug.id %}">
                                                <button type="button" class="badge badge-info">
                                                    View Bug
                                                </button>
                                            </a>
                                            <a href="{% url 'edit_bug' bug.id %}">
                                                <button type="button" class="badge badge-primary">
                                                    Edit Bug
                                                </button>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
                <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                    <div class="row">
                        {% for bug in bugs %}
                            {% if bug.status == "Done" %}
                                <div class=" col-md-4">
                                    <div style="border-left: 5px solid green" class="card flex-md-row mb-4 shadow-sm h-md-250 card-display">
                                        <div class="card-body d-flex flex-column align-items-start">
                                            <h5 class="post-title">
                                                {{ bug.title }}
                                            </h5>
                                            <a href="{% url 'delete_bug' bug.id %}">
                                                <button type="button" class="close right-corner" aria-label="Close">
                                                    <span aria-hidden="true">
                                                        &times;
                                                    </span>
                                                </button>
                                            </a>
                                            <p class="card-text mb-auto post-text">
                                                {{ bug.description|truncatechars:65 }}
                                            </p>
                                            <div class="mb-1 text-muted post-date">
                                                {{ bug.created_date| date:"D j Y " }}
                                            </div>
                                            <a href="{% url 'preview_bug' bug.id %}">
                                                <button type="button" class="badge badge-info">
                                                    View Bug
                                                </button>
                                            </a>
                                            <a href="{% url 'edit_bug' bug.id %}">
                                                <button type="button" class="badge badge-primary">
                                                    Edit Bug
                                                </button>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        
        {% comment %}  <---------- FEATURES ----------> {% endcomment %}

        <div class="tab-pane fade" id="Feature" role="tabpanel" aria-labelledby="Feature-tab">
            <p class="lead text-muted tab-display">
                All our amazing features are listed below. If you wish to purchase an amazing feature simply add to your cart and purchase through the website. Add any comment you have about the feature for others to see.
            </p>
            <div class="row mb-2">
                {% for feature in features %}
                    <div class="col-md-4">
                        <div class="card flex-md-row mb-4 shadow-sm h-md-250">
                            <div class="card-body d-flex flex-column align-items-start card-display">
                                <h5 class="post-title">
                                   {{ feature.title }}
                                </h5>
                                <p class="card-text mb-auto">
                                    {{ feature.description|truncatechars:50 }}
                                </p>
                                <div class="mb-1 text-muted post-date">
                                    {{ feature.created_date| date:"D j Y " }}
                                </div>
                                <a href="{% url 'preview_feature' feature.id %}">
                                    <button type="button" class="badge badge-info">
                                        View Feature
                                    </button>
                                </a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>


{% endblock %}